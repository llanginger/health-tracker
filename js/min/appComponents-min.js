var app=app||{},keys={ESC:27,TAB:9,ENTER:13,LEFT:37,UP:38,RIGHT:39,DOWN:40},leoSets={autoUrl:"https://api.nutritionix.com/v2/autocomplete?",appId:"appId=02cd80d0",appKey:"appKey=421b1fb27190316a6585e273b648dd6f",fields:"fields=item_name%2Citem_id%2Cbrand_name%2Cnf_calories%2Cnf_total_fat"};$(function(){var e=-1,o=leoSets.autoUrl+"&"+leoSets.appId+"&"+leoSets.appKey;$("input").bind("keydown",function(e){("38"==e.which||"40"==e.which||"13"==e.which)&&e.preventDefault()}),$("#leo-auto-bar").focus(function(){$(".leo-auto-suggestions").children().length>0&&$(".leo-auto-suggestions").removeClass("hidden"),$("#leo-auto-bar").keydown(function(s){if(console.log(s.which),s.which!=keys.DOWN&&s.which!=keys.UP&&s.which!=keys.ENTER&&s.which!=keys.TAB&&s.which!=keys.LEFT&&s.which!=keys.RIGHT&&s.which!=keys.ESC){var t=$(this).val().trim();""!=t&&$.ajax(o+"&q="+t).fail(function(e){alert("Nutri api call failed")}).done(function(e){$(".leo-auto-suggestions").html(""),console.log(e),console.log(t),console.log(o);for(var s in e)if(e.hasOwnProperty(s)){var a=e[s].text;$(".leo-auto-suggestions").append("<div class='leo-auto-suggest' data-index='"+s+"'>"+a+"</div>")}$(".leo-auto-suggestions").removeClass("hidden"),$(".leo-auto-suggest").click(function(){$("#leo-auto-bar").val($(this).text())}),$(".leo-auto-suggest").mouseenter(function(){$(this).addClass("leo-selected")}),$(".leo-auto-suggest").mouseleave(function(){$(this).removeClass("leo-selected")})})}var a=$("div"),l=$(".leo-selected");s.which===keys.DOWN?(e++,$(".leo-auto-suggest").removeClass("leo-selected"),$("[data-index*='"+e+"']").addClass("leo-selected"),a.animate({scrollTop:l.offset().top})):s.which===keys.UP&&e>0?(e--,$(".leo-auto-suggest").removeClass("leo-selected"),$("[data-index*='"+e+"']").addClass("leo-selected")):s.which===keys.ENTER&&(console.log($(".leo-selected").text()),$("#leo-auto-bar").val($(".leo-selected").text()))})}),$("#leo-auto-bar").blur(function(){$(".leo-auto-suggestions").addClass("hidden")})});