var app=app||{},nSets={searchUrl:"https://api.nutritionix.com/v1_1/search/",autoUrl:"https://api.nutritionix.com/v2/autocomplete?",phrase:"Tacos",appId:"appId=02cd80d0",appKey:"appKey=421b1fb27190316a6585e273b648dd6f",calMin:"",calMax:"",fields:"fields=item_name%2Citem_id%2Cbrand_name%2Cnf_calories%2Cnf_total_fat"};$(function(){$("body").click(function(o){console.log(o.target)});var o;$("#autocomplete").on("change",function(){o=$(this).val()});var t=[{value:"British Pound",data:"GBP"},{value:"US Dollar",data:"USD"},{value:"Algerian dinar",data:"DZD"},{value:"European euro",data:"EUR"},{value:"Angolan kwanza",data:"AOA"},{value:"East Caribbean dollar",data:"XCD"}];$("#autocomplete").autocomplete({lookup:function(o,t){console.log(o);var e={},n=[],a=nSets.autoUrl+"&"+nSets.appId+"&"+nSets.appKey;$.ajax(a+"&q="+o).fail(function(o){console.log(a),console.log("Nutri api call failed")}).done(function(o){console.log(o),console.log(a);for(var i in o)if(o.hasOwnProperty(i)){var l=o[i].text;n.push({value:l,data:i}),console.log(n)}e.suggestions=n,t(e)})}})}),app.SearchView=Backbone.View.extend({el:"#search-div",events:{"click input":"edit","click .food-option":"printOption","keypress #search-bar":"updateOnEnter"},printOption:function(){this.$option=this.$("option"),console.log(this.$option)},initialize:function(){this.listenTo(this.model,"change",this.render),this.render(),console.log("Something happened")},render:function(){return this.$input=this.$(".edit"),console.log(JSON.stringify(this.model)),this},edit:function(){this.$input.val(""),this.$el.addClass("editing"),console.log("Edit fired")},close:function(){var o=this.$input.val().trim();o?(console.log(o),$.ajax(nSets.searchUrl+o+"?"+nSets.fields+"&"+nSets.appId+"&"+nSets.appKey).fail(function(o){console.log("Nutri api call failed")}).done(function(o){console.log(o)})):this.clear()},autocompleteBar:function(){var o=this.$input.val().trim(),t=nSets.autoUrl+o+"&"+nSets.appId+"&"+nSets.appKey;$.ajax(t).fail(function(o){console.log("Nutri api call failed")}).done(function(e){console.log(t),$("option").remove();for(var n=0;n<e.length;n++)$("#food-list").append("<option class='food-option' value='"+e[n].text+"' />");console.log(e),console.log(o)})},updateOnEnter:function(o){o.which===ENTER_KEY?this.close():this.autocompleteBar()},clear:function(){this.model.destroy()}});